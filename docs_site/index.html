<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ExJoi · Real-time Docs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-slate-950 text-slate-100 antialiased">
    <div id="common-header"></div>
    <div class="flex min-h-screen pt-16">
      <div id="common-sidebar"></div>

      <main class="flex-1 px-6 py-10 lg:px-16 space-y-16 lg:ml-0">
        <header class="rounded-3xl border border-slate-800 bg-gradient-to-br from-slate-900 via-slate-900/60 to-slate-900/20 p-10 shadow-2xl">
          <p class="inline-flex items-center rounded-full border border-slate-700 px-3 py-1 text-xs uppercase tracking-widest text-slate-400">
            v0.8 · Error tree + translations
          </p>
          <h1 class="mt-4 text-4xl font-black text-white">ExJoi brings expressive, real-time validation to Elixir.</h1>
          <p class="mt-4 max-w-3xl text-lg text-slate-300">
            Schema-first DSL. Convert mode. Conditional rules. Custom validators. All packaged with an extendable runtime so your product teams can ship cohesive validations everywhere.
          </p>
          <div class="mt-8 flex flex-wrap gap-4">
            <a href="https://hexdocs.pm/exjoi/0.8.0" class="inline-flex items-center rounded-full bg-white px-5 py-2 font-semibold text-slate-900 shadow-lg shadow-sky-500/40">
              View HexDocs
            </a>
            <a href="https://github.com/abrshewube/ExJoi" class="inline-flex items-center rounded-full border border-slate-700 px-5 py-2 font-semibold text-slate-100">
              GitHub
            </a>
          </div>
        </header>

        <section id="overview" class="space-y-4">
          <p class="section-label">Overview</p>
          <h2 class="section-title">Why teams adopt ExJoi</h2>
          <div class="grid gap-6 md:grid-cols-3">
            <article class="feature-card">
              <h3>Schema-first DSL</h3>
              <p>Declarative helpers for strings, numbers, booleans, objects, arrays, dates, and conditionals.</p>
            </article>
            <article class="feature-card">
              <h3>Convert &amp; extend</h3>
              <p>Toggle convert mode per validation and register custom validators via <code>ExJoi.extend/2</code>.</p>
            </article>
            <article class="feature-card">
              <h3>Error tree &amp; translations</h3>
              <p>Consume flattened, path-based errors and global translators for localized messaging.</p>
            </article>
          </div>
        </section>

        <section class="docs-section">
          <div>
            <p class="section-label">Deep Guides</p>
            <h2 class="section-title">Each topic gets its own page</h2>
            <p class="text-slate-400 mt-2">Prefer multi-page docs? Jump into these standalone guides.</p>
          </div>
          <div class="grid gap-6 md:grid-cols-2">
            <a class="feature-card hover:bg-slate-900/60 transition" href="quickstart.html">
              <h3>Quick Start</h3>
              <p>Installation, schema scaffolding, workflows, and CLI commands.</p>
            </a>
            <a class="feature-card hover:bg-slate-900/60 transition" href="convert-mode.html">
              <h3>Convert Mode</h3>
              <p>Type matrix, casting strategies, and safety tips.</p>
            </a>
            <a class="feature-card hover:bg-slate-900/60 transition" href="conditional-rules.html">
              <h3>Conditional Rules</h3>
              <p>Everything about <code>ExJoi.when/3</code>, from simple cases to nested branches.</p>
            </a>
            <a class="feature-card hover:bg-slate-900/60 transition" href="custom-validators.html">
              <h3>Custom Validators</h3>
              <p>Register functions or modules, share plugins, and shape error builders.</p>
            </a>
            <a class="feature-card hover:bg-slate-900/60 transition" href="error-tree.html">
              <h3>Error Tree</h3>
              <p>Consume <code>errors_flat</code>, translate copy, and integrate with your API.</p>
            </a>
            <a class="feature-card hover:bg-slate-900/60 transition" href="playground.html">
              <h3>Playground</h3>
              <p>Live schema demo with convert toggle, conditional logic, and JSON sandbox.</p>
            </a>
          </div>
        </section>

        <section id="quick-start" class="docs-section">
          <div>
            <p class="section-label">Quick Start</p>
            <h2 class="section-title">Install &amp; Validate</h2>
          </div>
          <div class="code-card">
            <div class="code-header">
              <span>mix.exs</span>
              <button class="copy-btn" data-clipboard-target="#deps-snippet">Copy</button>
            </div>
            <pre><code id="deps-snippet">defp deps do
  [
    {:exjoi, "~> 0.8.0"}
  ]
end</code></pre>
          </div>
          <div class="code-card">
            <div class="code-header">
              <span>Schema</span>
              <button class="copy-btn" data-clipboard-target="#schema-snippet">Copy</button>
            </div>
            <pre><code id="schema-snippet">schema =
  ExJoi.schema(%{
    role: ExJoi.string(required: true),
    friends: ExJoi.array(of: ExJoi.string(min: 3), min_items: 1, unique: true),
    permissions:
      ExJoi.when(
        :role,
        is: "admin",
        then: ExJoi.array(of: ExJoi.string(), min_items: 1, required: true),
        otherwise: ExJoi.array(of: ExJoi.string())
      )
  })</code></pre>
          </div>
        </section>

        <section id="error-tree" class="docs-section">
          <div>
            <p class="section-label">Error Tree</p>
            <h2 class="section-title">Path-based errors &amp; translations</h2>
            <p class="mt-2 text-slate-400">
              Use the new <code>errors_flat</code> map for dotted paths (e.g., <code>user.email</code>) and plug a translator for localized copy.
            </p>
          </div>
          <div class="grid gap-6 lg:grid-cols-2">
            <div class="code-card">
              <div class="code-header">
                <span>Flattened output</span>
                <button class="copy-btn" data-clipboard-target="#flat-snippet">Copy</button>
              </div>
              <pre><code id="flat-snippet">{:error,
 %{
   errors_flat: %{
     "user.email" => ["must be a valid email"],
     "permissions.0" => ["must be at least 3 characters"]
   }
 }}</code></pre>
            </div>
            <div class="code-card">
              <div class="code-header">
                <span>Translator hook</span>
                <button class="copy-btn" data-clipboard-target="#translator-snippet">Copy</button>
              </div>
              <pre><code id="translator-snippet">ExJoi.configure(
  message_translator: fn
    :required, _default, _meta -> "es requerido"
    _code, default, _meta -> default
  end
)</code></pre>
            </div>
          </div>
        </section>

        <section id="convert-mode" class="docs-section">
          <div>
            <p class="section-label">Convert Mode</p>
            <h2 class="section-title">Automatic casting when you want it</h2>
            <p class="mt-2 text-slate-400">
              Pass <code>convert: true</code> to coerce strings into numbers, booleans, arrays (via delimiters), and ISO dates. Default strict mode keeps types honest.
            </p>
          </div>
          <div class="code-card">
            <div class="code-header">
              <span>Convert Mode</span>
              <button class="copy-btn" data-clipboard-target="#convert-snippet">Copy</button>
            </div>
            <pre><code id="convert-snippet">params = %{"age" => "42", "active" => "true", "onboarded_at" => "2025-01-01T00:00:00Z"}
ExJoi.validate(params, schema, convert: true)
# {:ok, %{"age" => 42, "active" => true, "onboarded_at" => ~U[2025-01-01 00:00:00Z]}}</code></pre>
          </div>
        </section>

        <section id="conditional-rules" class="docs-section">
          <div>
            <p class="section-label">Conditional Rules</p>
            <h2 class="section-title">Dynamic validation via <code>ExJoi.when/3</code></h2>
          </div>
          <div class="grid gap-6 md:grid-cols-2">
            <article class="border border-slate-800 rounded-2xl p-5 bg-slate-900/40">
              <h3 class="font-semibold mb-2 text-white">Field-driven</h3>
              <p class="text-slate-400 mb-4">Switch validators based on another field’s value, range, or regex pattern.</p>
              <pre><code>guardian_contact:
  ExJoi.when(
    :age,
    max: 17,
    then: ExJoi.string(required: true, min: 5)
  )</code></pre>
            </article>
            <article class="border border-slate-800 rounded-2xl p-5 bg-slate-900/40">
              <h3 class="font-semibold mb-2 text-white">Regex-driven</h3>
              <p class="text-slate-400 mb-4">Use `:matches` for plan tiers, locales, or SKU prefixes.</p>
              <pre><code>pro_feature_flag:
  ExJoi.when(
    :plan,
    matches: ~r/^pro/i,
    then: ExJoi.boolean(required: true),
    otherwise: ExJoi.boolean()
  )</code></pre>
            </article>
          </div>
        </section>

        <section id="custom-validators" class="docs-section">
          <div>
            <p class="section-label">Custom Validators</p>
            <h2 class="section-title">Extend ExJoi for your domain</h2>
          </div>
          <div class="grid gap-6 lg:grid-cols-2">
            <div class="code-card">
              <div class="code-header">
                <span>Function-based validator</span>
                <button class="copy-btn" data-clipboard-target="#extend-snippet">Copy</button>
              </div>
              <pre><code id="extend-snippet">ExJoi.extend(:uuid, fn value ->
  if Regex.match?(~r/^[0-9a-f-]{32}$/i, value) do
    {:ok, String.downcase(value)}
  else
    {:error, [%{code: :uuid, message: "must be a UUID"}]}
  end
end)

schema = ExJoi.schema(%{id: ExJoi.custom(:uuid, required: true)})</code></pre>
            </div>
            <div class="border border-slate-800 rounded-3xl p-6 bg-slate-900/40">
              <h3 class="font-semibold text-white">Module-based validator</h3>
              <p class="text-slate-400 mb-4">Implement <code>ExJoi.CustomValidator</code> to reuse logic.</p>
              <pre><code>defmodule MyApp.UUIDValidator do
  @behaviour ExJoi.CustomValidator

  def validate(value, _rule, _ctx) do
    case Ecto.UUID.cast(value) do
      {:ok, uuid} -> {:ok, uuid}
      :error -> {:error, [%{code: :uuid, message: "invalid UUID"}]}
    end
  end
end</code></pre>
            </div>
          </div>
        </section>

        <section id="live-playground" class="docs-section">
          <div>
            <p class="section-label">Live Playground</p>
            <h2 class="section-title">Try schema logic in real time</h2>
            <p class="text-slate-400 mt-2">
              Toggle role and permissions to preview which branch of <code>ExJoi.when/3</code> activates. This is a conceptual helper—hook it into your own validation pipeline.
            </p>
          </div>
          <div class="rounded-3xl border border-slate-800 bg-slate-900/40 p-6">
            <div class="grid gap-4 md:grid-cols-2">
              <div class="space-y-4">
                <label class="block">
                  <span class="text-sm text-slate-400">Role</span>
                  <select id="role-input" class="mt-1 w-full rounded-2xl border border-slate-700 bg-slate-900 px-3 py-2 text-white">
                    <option value="admin">admin</option>
                    <option value="editor">editor</option>
                    <option value="viewer">viewer</option>
                  </select>
                </label>
                <label class="block">
                  <span class="text-sm text-slate-400">Permissions (comma separated)</span>
                  <input id="permissions-input" class="mt-1 w-full rounded-2xl border border-slate-700 bg-slate-900 px-3 py-2 text-white" value="read,write" />
                </label>
                <button id="simulate-btn" class="w-full rounded-2xl bg-gradient-to-r from-sky-500 to-emerald-400 py-2 font-semibold text-slate-950">
                  Simulate Validation
                </button>
              </div>
              <div>
                <p class="text-sm text-slate-400 mb-2">Result</p>
                <pre class="rounded-2xl border border-slate-800 bg-slate-950/70 p-4 text-sm" id="playground-output">
// Change inputs and click “Simulate Validation”</pre>
              </div>
            </div>
          </div>
        </section>

        <section id="roadmap" class="docs-section">
          <div>
            <p class="section-label">Roadmap</p>
            <h2 class="section-title">Version milestones</h2>
          </div>
          <div class="overflow-hidden rounded-3xl border border-slate-800">
            <table class="min-w-full divide-y divide-slate-800 text-left text-sm">
              <thead class="bg-slate-900/60 text-slate-400 uppercase text-xs tracking-widest">
                <tr>
                  <th class="px-6 py-3">Version</th>
                  <th class="px-6 py-3">Status</th>
                  <th class="px-6 py-3">Highlights</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-slate-800">
                <tr class="bg-white/5">
                  <td class="px-6 py-4 font-semibold">8 (current)</td>
                  <td class="px-6 py-4 text-emerald-400">Shipped</td>
                  <td class="px-6 py-4">Path-based error tree, translator hooks, enhanced builder</td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold">7</td>
                  <td class="px-6 py-4 text-emerald-400">Shipped</td>
                  <td class="px-6 py-4">Custom validators, plugin registry, error builder overrides</td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold">6</td>
                  <td class="px-6 py-4 text-emerald-400">Shipped</td>
                  <td class="px-6 py-4">Conditional rules with <code>ExJoi.when/3</code></td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold">5</td>
                  <td class="px-6 py-4 text-emerald-400">Shipped</td>
                  <td class="px-6 py-4">Convert mode (numbers, booleans, dates), <code>ExJoi.date/1</code></td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold">4</td>
                  <td class="px-6 py-4 text-emerald-400">Shipped</td>
                  <td class="px-6 py-4">Array validation (length, uniqueness, delimiter coercion)</td>
                </tr>
                <tr>
                  <td class="px-6 py-4 font-semibold">Next</td>
                  <td class="px-6 py-4 text-slate-300">In design</td>
                  <td class="px-6 py-4">Async / parallel validation, macro DSL, performance improvements</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

      </main>
    </div>

    <div id="common-footer"></div>

    <script src="common.js"></script>
    <script src="scripts.js"></script>
  </body>
</html>

